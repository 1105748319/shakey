package shakey.internal

import shakey.services.{Stock, StockDatabase, LoggerSupport}
import java.util.concurrent.ConcurrentHashMap

/**
 * Created by jcai on 14-9-26.
 */
class MemoryStockDatabase extends StockDatabase with LoggerSupport {
  private val db = new ConcurrentHashMap[String, Stock]()

  override def findStockBySymbol(symbol: String): Option[Stock] = {
    val value = db.get(symbol)
    if (value == null) None else Some(value)
  }

  override def updateStockList(fun: (Stock) => Unit): Unit = {
    val it = db.values().iterator()
    while (it.hasNext)
      fun(it.next())
  }

  private val tmpStock = Array(
    "BRK.A",
    "SEB",
    "HBANP",
    "PCLN",
    "NVR",
    "GHC",
    "WPO",
    "CMG",
    "MKL",
    "WTM",
    "GOOGL",
    "GOOG",
    "GOOAV",
    "GOOCV",
    "AZO",
    "ISRG",
    "NFLX",
    "Y",
    "NEU",
    "ALX",
    "REGN",
    "BH",
    "IRDMB",
    "BIIB",
    "AMZN",
    "BLK",
    "ATRI",
    "BXUC",
    "IBB",
    "CF",
    "UHAL",
    "MTD",
    "PBYI",
    "SHPG",
    "MDY",
    "GWW",
    "TSLA",
    "ICPT",
    "NWLI",
    "ACT",
    "ADS",
    "PCP",
    "SAM",
    "SHW",
    "BIDU",
    "FCNCA",
    "V",
    "EQIX",
    "LNKD",
    "AMG",
    "VIPS",
    "CP",
    "IVV",
    "PPG",
    "ICE",
    "PXD",
    "MCK",
    "TPL",
    "BXUB",
    "IBM",
    "GS",
    "TDG",
    "WYNN",
    "VOO",
    "ESS",
    "LMT",
    "CEO",
    "ONEQ",
    "DJCO",
    "AGN",
    "VRTS",
    "SLYG",
    "SFLA",
    "SLXP",
    "ALXN",
    "RL",
    "ILMN",
    "PSA",
    "SPG",
    "JAZZ",
    "RE",
    "IWR",
    "CSGP",
    "FDX",
    "PNRA",
    "XBI",
    "COO",
    "CHTR",
    "TARO",
    "IJK",
    "BAP",
    "WHR",
    "VQT",
    "IYT",
    "PII",
    "ORLY",
    "HHC",
    "ROLA",
    "JKH",
    "THRK",
    "CLB",
    "RTLA",
    "ROP",
    "MWIV",
    "TWC",
    "BCR",
    "TNH",
    "MMM",
    "AVB",
    "IHE",
    "AMGN",
    "ULTI",
    "JKG",
    "ESGR",
    "ROM",
    "FLT",
    "XLG",
    "FXS",
    "IJH",
    "BRK.B",
    "MHK",
    "SIAL",
    "TRGP",
    "IYH",
    "UTHR",
    "SWU",
    "VMI",
    "BWLD",
    "CMI",
    "PTR",
    "APD",
    "SI",
    "PX",
    "VDE",
    "HUM",
    "IWW",
    "MLM",
    "ATK",
    "IUSV",
    "MSTR",
    "IWO",
    "TLH",
    "JKJ",
    "RYH",
    "GMCR",
    "NOC",
    "AAP",
    "UYG",
    "UKF",
    "ATHN",
    "PPLT",
    "VRX",
    "BA",
    "CNQR",
    "JKK",
    "HUB.A",
    "XEC",
    "CXO",
    "ASR",
    "COST",
    "IHS",
    "JLL",
    "GD",
    "GWRU",
    "DHIL",
    "CACC",
    "MTB",
    "IYC",
    "FIEG",
    "ALGT",
    "FIGY",
    "FIEU",
    "RFG",
    "ENR",
    "QLD",
    "AMP",
    "PVH",
    "UDOW",
    "DDM",
    "TECL",
    "HUB.B",
    "IEI",
    "IJJ",
    "TMO",
    "AYI",
    "FDS",
    "WLP",
    "CVX",
    "SNA",
    "VBK",
    "SSYS",
    "JKI",
    "JKL",
    "Z",
    "SGOL",
    "FFIV",
    "FEEU",
    "KSU",
    "ULTA",
    "LQD",
    "TM",
    "VHT",
    "ISRL",
    "PCYC",
    "IDXX",
    "VO",
    "VDC",
    "FRT",
    "KEX",
    "AGOL",
    "CMF",
    "HSIC",
    "IWV",
    "UPRO",
    "TLT",
    "DEO",
    "ECL",
    "BIO.B",
    "DNB",
    "BIO",
    "SRCL",
    "JKD",
    "BTI",
    "SIG",
    "EMB",
    "BDX",
    "BXP",
    "SWH",
    "IJT",
    "MON",
    "MDYG",
    "PH",
    "TIP",
    "GBF",
    "BUD",
    "AGZ",
    "SBNY",
    "SOXL",
    "ANAT",
    "UHS",
    "ARG",
    "ROK",
    "VB",
    "VAW",
    "DDS",
    "URI",
    "NYF",
    "CRED",
    "SIVB",
    "MELI",
    "CFT",
    "GVI",
    "SHV",
    "VRTX",
    "IWM",
    "LYB",
    "PRE",
    "NSC",
    "MUB",
    "LLL",
    "IWB",
    "CIU",
    "RXL",
    "SBAC",
    "EDV",
    "ESL",
    "AGG",
    "BOND",
    "EMES",
    "VCR",
    "WEX",
    "MBB",
    "IHF",
    "IJS",
    "JKE",
    "UKW",
    "GILD",
    "KMB",
    "UNP",
    "JNJ",
    "ITA",
    "EFO",
    "XPH",
    "SUB",
    "BBH",
    "TFX",
    "HBI",
    "IVW",
    "GFNCP",
    "CPA",
    "ASH",
    "IEP",
    "ACE",
    "CSJ",
    "ZROZ",
    "CURE",
    "AMSGP",
    "IJR",
    "FURX",
    "IDU",
    "UTX",
    "IBDD",
    "IBDC",
    "UXI",
    "BIB",
    "HII",
    "HYS",
    "IEF",
    "XHS",
    "SRE",
    "SLYV",
    "FXF",
    "VSS",
    "EMLB",
    "CORP",
    "OPEN",
    "FLGE",
    "IBDB",
    "HAR",
    "FBGX",
    "EW",
    "CHE",
    "CBRL",
    "APC",
    "ZSL",
    "WPPGY",
    "VC",
    "LH",
    "TRW",
    "LDUR",
    "MINT",
    "EXP",
    "SLG",
    "VIS",
    "ZMH",
    "ASPS",
    "MGA",
    "VTI",
    "IBDA",
    "SLB",
    "HAIN",
    "IYJ",
    "APH",
    "STIP",
    "VBR",
    "BUND",
    "COBO",
    "IUSB",
    "EOG",
    "RTN",
    "ISTB",
    "IGOV",
    "IWD",
    "IBDF",
    "WAT",
    "IHI",
    "TW",
    "IBCB",
    "XAR",
    "IBDH",
    "FTSD",
    "VNO",
    "HOLD",
    "CAT",
    "IYW",
    "RNR",
    "KOF",
    "ASML",
    "VUG",
    "FRX",
    "VGT",
    "IYY",
    "UMDD",
    "IYK",
    "CWEI",
    "SLY",
    "LQDH",
    "IBCC",
    "SJM",
    "DECK",
    "IBCD",
    "IXJ",
    "AAPL",
    "NYC",
    "QQQ",
    "SPYV",
    "HP",
    "TIF",
    "VIOG",
    "MDVN",
    "HYGH",
    "RHS",
    "SNDK",
    "SAA",
    "IGM",
    "OXY",
    "UNF",
    "UPS",
    "PANW",
    "GWR",
    "VOT",
    "WDC",
    "CHDN",
    "GLL",
    "FOSL",
    "CAD",
    "CSM",
    "MTK",
    "MJN",
    "IFF",
    "SPW",
    "IBCE",
    "VIOO",
    "HES",
    "VOOG",
    "CLX",
    "VTWG",
    "ALV",
    "UWC",
    "LTL",
    "PRFZ",
    "PCRX",
    "IWN",
    "TDY",
    "XOM",
    "MCD",
    "IVOG",
    "JJSF",
    "TRV",
    "QCOR",
    "VONG",
    "VIOV", "YY", "BABA", "BITA")
  tmpStock.foreach(x => db.put(x, new Stock(x)))
}
